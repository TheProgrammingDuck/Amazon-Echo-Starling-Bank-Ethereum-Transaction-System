{"version":3,"names":[],"mappings":"","sources":["entities/payment.js"],"sourcesContent":["import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders, postHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:payment-service');\n\n\n/**\n * Service to interact with a customer's transactions\n */\nclass Payment {\n  /**\n   * Create a new transaction service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Makes a payment on behalf of the customer to another UK bank account using the Faster Payments network\n   * @param {string} accessToken - the oauth bearer token.\n   *  @param {string} destinationAccountUid - the account identifier of the recipient\n   * @param {string} reference - The payment reference, max. 18 characters.\n   * @param {string} amount - the amount to be send.\n   * @param {string=} currency - the currency, optional, defaults to \"GBP\".\n   * @return {Promise} - the http request promise\n   */\n  makeLocalPayment (accessToken, destinationAccountUid, reference, amount, currency) {\n    typeValidation(arguments, makeLocalPaymentParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/payments/local`;\n    log(`POST ${url}`);\n    return axios({\n      method: 'POST',\n      url,\n      headers: postHeaders(accessToken),\n      data: JSON.stringify({\n        destinationAccountUid,\n        payment: {\n          amount,\n          currency\n        },\n        reference\n      })\n    });\n  }\n\n\n  /**\n   * Lists the customer's scheduled payments\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  listScheduledPayments (accessToken) {\n    typeValidation(arguments, listScheduledPaymentsParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/payments/scheduled`;\n    log(`GET ${url}`);\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst makeLocalPaymentParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'destinationAccountUid', validations: ['required', 'string']},\n  {name: 'reference', validations: ['required', 'string']},\n  {name: 'amount', validations: ['required', 'string']},\n  {name: 'currency', validations: ['optional', 'string']}\n];\n\nconst listScheduledPaymentsParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n];\n\nmodule.exports = Payment;\n"],"file":"payment.js"}