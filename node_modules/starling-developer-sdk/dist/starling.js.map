{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/entities/account.js","src/entities/address.js","src/entities/card.js","src/entities/contact.js","src/entities/customer.js","src/entities/mandate.js","src/entities/oauth.js","src/entities/payment.js","src/entities/savingsGoals.js","src/entities/transaction.js","src/entities/whoAmI.js","src/starling.js","src/utils/http.js","src/utils/validator.js"],"names":[],"mappings":"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","file":"starling.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:account-service');\n\n/**\n * Service to interact with a customer's account\n */\nclass Account {\n\n  /**\n   * Creates an instance of the account client\n   * @param {Object} options - application config\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Retrieves a customer's account\n   * @param {string} accessToken - the oauth bearer token\n   * @return {Promise} - the http request promise\n   */\n  getAccount (accessToken) {\n    typeValidation(arguments, getAccountParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/accounts`;\n    log(`GET ${url}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Retrieves the customer's balance\n   * @param {string} accessToken - the oauth bearer token\n   * @return {Promise} - the http request promise\n   */\n  getBalance (accessToken) {\n    typeValidation(arguments, getBalanceParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/accounts/balance`;\n    log(`GET ${url}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst getAccountParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n  ];\n\nconst getBalanceParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n  ];\n\nmodule.exports = Account;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:address-service');\n\n/**\n * Service to interact with a customer address\n */\nclass Address {\n\n  /**\n   * Creates an instance of the address client\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Retrieves a customer's address\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  getAddresses (accessToken) {\n    typeValidation(arguments, getAddressParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/addresses`;\n    log(`GET ${url}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst getAddressParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n  ];\n\nmodule.exports = Address;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:card-service');\n\n/**\n * Service to interact with a customer card\n */\nclass Card {\n\n  /**\n   * Creates an instance of the client's card\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Retrieves a customer's card\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  getCard (accessToken) {\n    typeValidation(arguments, getCardParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/cards`;\n    log(`GET ${url}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst getCardParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n  ];\n\nmodule.exports = Card;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders, postHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:contact-service');\n\n/**\n * Service to interact with a customer's contacts (payees)\n */\nclass Contact {\n\n  /**\n   * Create a new contact service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Gets the customer's contacts (payees)\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  getContacts (accessToken) {\n    typeValidation(arguments, getContactsParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/contacts`;\n    log(`GET ${url}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Gets a specific contact's (payee) account details\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} contactId - the contact's ID.\n   * @return {Promise} - the http request promise\n   */\n  getContactAccount (accessToken, contactId) {\n    typeValidation(arguments, getContactAccountParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/contacts/${contactId}/accounts`;\n    log(`GET ${url}`);\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Creates a contact (payee) for the customer\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} name - the name of the new contact.\n   * @param {string} accountType - the account type (domestic or international).\n   * @param {string} accountNumber - the contact's bank account number.\n   * @param {string} sortCode - the contact's sort code.\n   * @param {string} customerId - the customer's ID. (optional)\n   * @return {Promise} - the http request promise\n   */\n  createContact (accessToken, name, accountType, accountNumber, sortCode, customerId) {\n    typeValidation(arguments, createContactParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/contacts`;\n    log(`POST ${url}`);\n    return axios({\n      method: 'POST',\n      url,\n      headers: postHeaders(accessToken),\n      data: JSON.stringify({\n        name,\n        accountType,\n        accountNumber,\n        sortCode,\n        customerId\n      }),\n    });\n  }\n\n\n  /**\n   * Deletes a specific contact (payee) from the customer's account\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} contactId - the Identifier of the contact to be deleted.\n   * @return {Promise} - the http request promise\n   */\n  deleteContact (accessToken, contactId) {\n    typeValidation(arguments, deleteContactParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/contacts/${contactId}`;\n    log(`DELETE ${url}`);\n    return axios({\n      method: 'DELETE',\n      url,\n      headers: defaultHeaders(accessToken),\n    });\n  }\n}\n\nconst getContactsParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n  ];\n\nconst getContactAccountParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'contactId', validations: ['required', 'string']}\n  ];\n\nconst createContactParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'name', validations: ['required', 'string']},\n  {name: 'accountType', validations: ['required', 'string']},\n  {name: 'accountNumber', validations: ['required', 'string']},\n  {name: 'sortCode', validations: ['required', 'string']},\n  {name: 'customerId', validations: ['optional', 'string']}\n  ];\n\nconst deleteContactParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'contactId', validations: ['required', 'string']}\n];\n\nmodule.exports = Contact;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:customer-service');\n\n/**\n * Service to interact with a customer\n */\nclass Customer {\n\n  /**\n   * Create a new customer service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Gets the customer's details\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  getCustomer (accessToken) {\n    typeValidation(arguments, getCustomerParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/customers`;\n    log(`GET ${url}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst getCustomerParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n  ];\n\nmodule.exports = Customer;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:mandate-service');\n\n\n/**\n * Service to interact with a customer's transactions\n */\nclass Mandate {\n  /**\n   * Create a new transaction service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Gets a list of the customer's current direct debit mandates\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  listMandates (accessToken) {\n    typeValidation(arguments, listMandatesParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/direct-debit/mandates`;\n    log(`GET ${url}`);\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Deletes specific direct debit mandate\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} mandateId - the unique mandate ID\n   * @return {Promise} - the http request promise\n   */\n  deleteMandate (accessToken, mandateId) {\n    typeValidation(arguments, deleteMandateParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/direct-debit/mandates/${mandateId}`;\n    log(`DELETE ${url}`);\n    return axios({\n      method: 'DELETE',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst listMandatesParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n];\n\nconst deleteMandateParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'mandateId', validations: ['required', 'string']}\n];\n\nmodule.exports = Mandate;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {typeValidation} from '../utils/validator';\n\nconst ACCESS_TOKEN_GRANT_TYPE = 'authorization_code';\nconst REFRESH_TOKEN_GRANT_TYPE = 'refresh_token';\n\nconst log = debug('starling:oauth-service');\n\n/**\n * Service to interact with a the oauth endpoint\n */\nclass OAuth {\n\n  /**\n   * Create a new oauth service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Exchanges the authorization code for an access token\n   * @param {string} authorizationCode - the authorization code, acquired from the user agent after the\n   * user authenticates with starling\n   * @return {Promise} - the http request promise\n   */\n  getAccessToken (authorizationCode) {\n    typeValidation(arguments, authorizationCodeParameterDefinition);\n    return this.getOAuthToken({\n      'code': authorizationCode,\n      'grant_type': ACCESS_TOKEN_GRANT_TYPE,\n      'client_id': this.options.clientId,\n      'client_secret': this.options.clientSecret,\n      'redirect_uri': this.options.redirectUri\n    });\n  }\n\n  /**\n   * Exchanges the authorization code for an access token\n   * @param {string} refreshToken - the oauth refresh token, used when the access token\n   * expires to claim a new access token.\n   * @return {Promise} - the http request promise\n   */\n  refreshAccessToken (refreshToken) {\n    typeValidation(arguments, refreshTokenParameterDefinition);\n    return this.getOAuthToken({\n      'refresh_token': refreshToken,\n      'grant_type': REFRESH_TOKEN_GRANT_TYPE,\n      'client_id': this.options.clientId,\n      'client_secret': this.options.clientSecret\n    });\n  }\n\n  /**\n   * Gets the access token from the starling oauth endpoint\n   * @param {object} params - the query params passed to the oauth endpoint as per the oauth spec\n   * @return {Promise} - the http request promise\n   */\n  getOAuthToken (params) {\n    if (!this.options.clientId) {\n      throw Error('clientId is not configured');\n    }\n\n    if (!this.options.clientSecret) {\n      throw Error('clientSecret is not configured');\n    }\n\n    const url = `${this.options.oauthUrl}/oauth/access-token`;\n    log(`POST ${url} queryParams:${JSON.stringify(params)}`);\n\n    return axios({\n      url,\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        Accept: 'application/json'\n      },\n      params: params\n    });\n  }\n}\n\nconst refreshTokenParameterDefinition = [\n  {name: 'refreshToken', validations: ['required', 'string']}\n];\n\nconst authorizationCodeParameterDefinition = [\n  {name: 'authorizationCode', validations: ['required', 'string']}\n];\n\nmodule.exports = OAuth;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders, postHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:payment-service');\n\n\n/**\n * Service to interact with a customer's transactions\n */\nclass Payment {\n  /**\n   * Create a new transaction service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Makes a payment on behalf of the customer to another UK bank account using the Faster Payments network\n   * @param {string} accessToken - the oauth bearer token.\n   *  @param {string} destinationAccountUid - the account identifier of the recipient\n   * @param {string} reference - The payment reference, max. 18 characters.\n   * @param {string} amount - the amount to be send.\n   * @param {string=} currency - the currency, optional, defaults to \"GBP\".\n   * @return {Promise} - the http request promise\n   */\n  makeLocalPayment (accessToken, destinationAccountUid, reference, amount, currency) {\n    typeValidation(arguments, makeLocalPaymentParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/payments/local`;\n    log(`POST ${url}`);\n    return axios({\n      method: 'POST',\n      url,\n      headers: postHeaders(accessToken),\n      data: JSON.stringify({\n        destinationAccountUid,\n        payment: {\n          amount,\n          currency\n        },\n        reference\n      })\n    });\n  }\n\n\n  /**\n   * Lists the customer's scheduled payments\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  listScheduledPayments (accessToken) {\n    typeValidation(arguments, listScheduledPaymentsParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/payments/scheduled`;\n    log(`GET ${url}`);\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst makeLocalPaymentParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'destinationAccountUid', validations: ['required', 'string']},\n  {name: 'reference', validations: ['required', 'string']},\n  {name: 'amount', validations: ['required', 'string']},\n  {name: 'currency', validations: ['optional', 'string']}\n];\n\nconst listScheduledPaymentsParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n];\n\nmodule.exports = Payment;\n","import axios from 'axios';\nimport debug from 'debug';\nimport { defaultHeaders, postHeaders } from '../utils/http';\nimport { typeValidation } from '../utils/validator';\n\nconst log = debug('starling:saving-goals-service');\n\n/**\n * Service to interact with a customer's savings goals\n */\nclass SavingsGoals {\n  /**\n   * Create a new savings goal service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Gets a list of the customer's savings goals\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  listSavingsGoals (accessToken) {\n    typeValidation(arguments, listSavingsGoalsParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/savings-goals`;\n    log(`GET ${url}`);\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Gets a specific savings goal\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} savingsGoalId - the savings goal's ID.\n   * @return {Promise} - the http request promise\n   */\n  getSavingsGoal (accessToken, savingsGoalId) {\n    typeValidation(arguments, getSavingsGoalParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/savings-goals/${savingsGoalId}`;\n    log(`GET ${url}`);\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Creates a savings goal\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} savingsGoalId - the savings goal's ID, generate one if creating a goal.\n   * @param {string} name - the name of the new contact.\n   * @param {string} currency - the currency of the savings goal. Defaults to 'GBP'.\n   * @param {number} targetAmount - the target amount in minor units (e.g. 1234 => Â£12.34).\n   * @param {string} targetCurrency - the target currency, also defaults to 'GBP'.\n   * @param {string} base64EncodedPhoto - base64 encoded image to associate with the goal. (optional)\n   * @return {Promise} - the http request promise\n   */\n  createSavingsGoal (accessToken, savingsGoalId, name, currency, targetAmount, targetCurrency, base64EncodedPhoto) {\n    typeValidation(arguments, createSavingsGoalParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/savings-goals/${savingsGoalId}`;\n    log(`PUT ${url}`);\n    return axios({\n      method: 'PUT',\n      url,\n      headers: postHeaders(accessToken),\n      data: JSON.stringify({\n        name,\n        currency,\n        target: {\n          targetAmount,\n          targetCurrency\n        },\n        base64EncodedPhoto\n      })\n    });\n  }\n\n  /**\n   * Deletes specific savings goal\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} savingsGoalId - the unique mandate ID\n   * @return {Promise} - the http request promise\n   */\n  deleteSavingsGoal (accessToken, savingsGoalId) {\n    typeValidation(arguments, deleteSavingsGoalParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/savings-goals/${savingsGoalId}`;\n    log(`DELETE ${url}`);\n    return axios({\n      method: 'DELETE',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst listSavingsGoalsParameterDefinition = [\n  { name: 'accessToken', validations: [ 'required', 'string' ] }\n];\n\nconst getSavingsGoalParameterDefinition = [\n  { name: 'accessToken', validations: [ 'required', 'string' ] },\n  { name: 'savingsGoalId', validations: [ 'required', 'string' ] }\n];\n\nconst deleteSavingsGoalParameterDefinition = [\n  { name: 'accessToken', validations: [ 'required', 'string' ] },\n  { name: 'savingsGoalId', validations: [ 'required', 'string' ] }\n];\n\nconst createSavingsGoalParameterDefinition = [\n  { name: 'accessToken', validations: [ 'required', 'string' ] },\n  { name: 'savingsGoalId', validations: [ 'required', 'string' ] },\n  { name: 'name', validations: [ 'required', 'string' ] },\n  { name: 'currency', validations: [ 'required', 'string' ] },\n  { name: 'targetAmount', validations: [ 'optional', 'number' ] },\n  { name: 'targetCurrency', validations: [ 'optional', 'string' ] },\n  { name: 'base64EncodedPhoto', validations: [ 'optional', 'string' ] }\n];\n\nmodule.exports = SavingsGoals;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:transaction-service');\n\nconst transactionSource = (source) => {\n  if (source === 'MASTER_CARD') {\n    return '/mastercard';\n  } else if (source === 'FASTER_PAYMENTS_IN') {\n    return '/fps/in';\n  } else if (source === 'FASTER_PAYMENTS_OUT') {\n    return '/fps/out';\n  } else if (source === 'DIRECT_DEBIT') {\n    return '/direct-debit';\n  } else {\n    return ''\n  }\n};\n\n/**\n * Service to interact with a customer's transactions\n */\nclass Transaction {\n  /**\n   * Create a new transaction service\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Gets the customer's transactions over the given period\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} fromDate - filter transactions after this date. Format: YYYY-MM-DD\n   * @param {string} toDate - filter transactions before this date. Format: YYYY-MM-DD\n   * @param {string=} source - the transaction type (e.g. faster payments, mastercard).\n   * If not specified, results are not filtered by source.\n   * @return {Promise} - the http request promise\n   */\n  getTransactions (accessToken, fromDate, toDate, source) {\n    typeValidation(arguments, getTransactionsParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/transactions${transactionSource(source)}`;\n    log(`GET ${url} from=${fromDate} to=${toDate}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      params: {\n        from: fromDate,\n        to: toDate\n      },\n      headers: defaultHeaders(accessToken)\n    });\n  }\n\n  /**\n   * Gets the full details of a single transaction\n   * @param {string} accessToken - the oauth bearer token\n   * @param {string} transactionId - the unique transaction ID\n   * @param {string=} source - the transaction type (e.g. faster payments, mastercard).\n   * If not specified, only generic transaction information will be returned.\n   * @return {Promise} - the http request promise\n   */\n  getTransaction (accessToken, transactionId, source) {\n    typeValidation(arguments, getTransactionParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/transactions${transactionSource(source)}/${transactionId}`;\n    log(`GET ${url}`);\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst getTransactionsParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'fromDate', validations: ['optional', 'string']},\n  {name: 'toDate', validations: ['optional', 'string']},\n  {name: 'source', validations: ['optional', 'string']}\n];\n\nconst getTransactionParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']},\n  {name: 'transactionId', validations: ['required', 'string']},\n  {name: 'source', validations: ['optional', 'string']}\n];\n\nmodule.exports = Transaction;\n","import axios from 'axios';\nimport debug from 'debug';\nimport {defaultHeaders} from '../utils/http';\nimport {typeValidation} from '../utils/validator';\n\nconst log = debug('starling:who-am-i-service');\n\n/**\n * Service to interact with the Who Am I endpoint\n */\nclass WhoAmI {\n\n  /**\n   * Creates an instance of the who am I client\n   * @param {Object} options - configuration parameters\n   */\n  constructor (options) {\n    this.options = options;\n  }\n\n  /**\n   * Retrieves the customer UUID and permissions corresponding to the access token passed\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  getMe (accessToken) {\n    typeValidation(arguments, getMeParameterDefinition);\n    const url = `${this.options.apiUrl}/api/v1/me`;\n    log(`GET ${url}`);\n\n    return axios({\n      method: 'GET',\n      url,\n      headers: defaultHeaders(accessToken)\n    });\n  }\n}\n\nconst getMeParameterDefinition = [\n  {name: 'accessToken', validations: ['required', 'string']}\n  ];\n\nmodule.exports = WhoAmI;\n","import Customer from './entities/customer';\nimport Account from './entities/account';\nimport Address from './entities/address';\nimport Transaction from './entities/transaction';\nimport Card from './entities/card';\nimport OAuth from './entities/oauth';\nimport Contact from './entities/contact';\nimport Payment from './entities/payment';\nimport Mandate from './entities/mandate';\nimport SavingsGoals from './entities/savingsGoals';\nimport WhoAmI from './entities/whoAmI';\n\n/**\n * Facade to dispatch operations to services\n */\nclass Starling {\n\n  /**\n   * Create an instance of the starling client\n   * @param {Object=} options - configuration parameters\n   */\n  constructor (options) {\n    const defaults = {\n      apiUrl: 'https://api.starlingbank.com',\n      oauthUrl: 'https://oauth.starlingbank.com',\n      clientId: '',\n      clientSecret: ''\n    };\n\n    this.config = Object.assign({}, defaults, options);\n\n    this.whoAmI = new WhoAmI(this.config);\n    this.customer = new Customer(this.config);\n    this.account = new Account(this.config);\n    this.address = new Address(this.config);\n    this.transaction = new Transaction(this.config);\n    this.payment = new Payment(this.config);\n    this.mandate = new Mandate(this.config);\n    this.contact = new Contact(this.config);\n    this.card = new Card(this.config);\n    this.savingsGoals = new SavingsGoals(this.config);\n    this.oAuth = new OAuth(this.config);\n  }\n\n  /**\n   * Gets the customer UUID and permissions corresponding to the access token passed\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @return {Promise} - the http request promise\n   */\n  getMe (accessToken = this.config.accessToken) {\n    return this.whoAmI.getMe(accessToken);\n  }\n\n  /**\n   * Gets the customer's details\n   * @param {string=} accessToken - the oauth bearer token. If not\n   * specified, the accessToken on the options object is used.\n   * @return {Promise} - the http request promise\n   */\n  getCustomer (accessToken = this.config.accessToken) {\n    return this.customer.getCustomer(accessToken);\n  }\n\n  /**\n   * Gets the customer's account details\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @return {Promise} - the http request promise\n   */\n  getAccount (accessToken = this.config.accessToken) {\n    return this.account.getAccount(accessToken);\n  }\n\n  /**\n   * Gets the customer's balance\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @return {Promise} - the http request promise\n   */\n  getBalance (accessToken = this.config.accessToken) {\n    return this.account.getBalance(accessToken);\n  }\n\n  /**\n   * Gets the customer's addresses (current and previous)\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @return {Promise} - the http request promise\n   */\n  getAddresses (accessToken = this.config.accessToken) {\n    return this.address.getAddresses(accessToken);\n  }\n\n  /**\n   * Gets the customer's transaction history\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @param {string} fromDate - filter transactions after this date. Format: YYYY-MM-DD (optional,\n   *   defaults to most recent 100 transactions)\n   * @param {string} toDate - filter transactions before this date. Format: YYYY-MM-DD (optional,\n   *   defaults to current date if not provided)\n   * @param {string=} source - the transaction type (e.g. faster payments, mastercard).\n   * If not specified, results are not filtered by source.\n   * @return {Promise} - the http request promise\n   */\n  getTransactions (accessToken = this.config.accessToken, fromDate, toDate, source) {\n    return this.transaction.getTransactions(accessToken, fromDate, toDate, source);\n  }\n\n  /**\n   * Gets the full details of a single transaction\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @param {string} transactionId - the unique transaction ID\n   * @param {string=} source - the transaction type (e.g. faster payments, mastercard).\n   * If not specified, only generic transaction information will be returned.\n   * @return {Promise} - the http request promise\n   */\n  getTransaction (accessToken = this.config.accessToken, transactionId, source) {\n    return this.transaction.getTransaction(accessToken, transactionId, source);\n  }\n\n  /**\n   * Gets the customer's current direct-debit mandates\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @return {Promise} - the http request promise\n   */\n  listMandates (accessToken = this.config.accessToken) {\n    return this.mandate.listMandates(accessToken);\n  }\n\n  /**\n   * Deletes specific direct debit mandate\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} mandateId - the unique mandate ID\n   * @return {Promise} - the http request promise\n   */\n  deleteMandate (accessToken = this.config.accessToken, mandateId) {\n    return this.mandate.deleteMandate(accessToken, mandateId);\n  }\n\n  /**\n   * Lists the customer's scheduled payments\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  listScheduledPayments (accessToken = this.config.accessToken) {\n    return this.payment.listScheduledPayments(accessToken);\n  }\n\n  /**\n   * Makes a payment on behalf of the customer to another UK bank account using the Faster Payments network\n   * @param {string} accessToken - the oauth bearer token.\n   *  @param {string} destinationAccountUid - the account identifier of the recipient\n   * @param {string} reference - The payment reference, max. 18 characters.\n   * @param {string} amount - the amount to be send.\n   * @param {string=} currency - the currency, optional, defaults to \"GBP\".\n   * @return {Promise} - the http request promise\n   */\n  makeLocalPayment (accessToken = this.config.accessToken, destinationAccountUid, reference, amount, currency = 'GBP') {\n    return this.payment.makeLocalPayment(accessToken, destinationAccountUid, reference, amount, currency);\n  }\n\n  /**\n   * Gets the customer's contacts (payees)\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  getContacts (accessToken = this.config.accessToken) {\n    return this.contact.getContacts(accessToken);\n  }\n\n  /**\n   * Gets a specific contact (payee)\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} contactId - the contact's ID.\n   * @return {Promise} - the http request promise\n   */\n  getContactAccount (accessToken = this.config.accessToken, contactId) {\n    return this.contact.getContactAccount(accessToken, contactId);\n  }\n\n  /**\n   * Creates a contact (payee) for the customer\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} name - the name of the new contact.\n   * @param {string=} accountType - the account type (domestic or international), optional and defaults to\n   *   UK_ACCOUNT_AND_SORT_CODE.\n   * @param {string} accountNumber - the contact's bank account number.\n   * @param {string} sortCode - the contact's sort code.\n   * @param {string} customerId - the customer's ID.\n   * @return {Promise} - the http request promise\n   */\n  createContact (accessToken = this.config.accessToken, name, accountType = 'UK_ACCOUNT_AND_SORT_CODE', accountNumber, sortCode, customerId) {\n    return this.contact.createContact(accessToken, name, accountType, accountNumber, sortCode, customerId);\n  }\n\n  deleteContact (accessToken, contactId) {\n    return this.contact.deleteContact(accessToken, contactId);\n  }\n\n  /**\n   * Gets a list of the customer's savings goals\n   * @param {string} accessToken - the oauth bearer token.\n   * @return {Promise} - the http request promise\n   */\n  listSavingsGoals (accessToken = this.config.accessToken) {\n    return this.savingsGoals.listSavingsGoals(accessToken);\n  }\n\n  /**\n   * Gets a specific savings goal\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} savingsGoalId - the savings goal's ID.\n   * @return {Promise} - the http request promise\n   */\n  getSavingsGoal (accessToken = this.config.accessToken, savingsGoalId) {\n    return this.savingsGoals.getSavingsGoal(accessToken, savingsGoalId);\n  }\n\n  /**\n   * Creates a contact (payee) for the customer\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} savingsGoalId - the savings goal's ID, generate one if creating a goal.\n   * @param {string} name - the name of the new contact.\n   * @param {string} currency - the currency of the savings goal. Defaults to 'GBP'.\n   * @param {number} targetAmount - the target amount in minor units (e.g. 1234 => Â£12.34).\n   * @param {string} targetCurrency - the target currency, also defaults to 'GBP'.\n   * @param {string} base64EncodedPhoto - base64 encoded image to associate with the goal. (optional)\n   * @return {Promise} - the http request promise\n   */\n  createSavingsGoal (accessToken = this.config.accessToken, savingsGoalId, name, currency = 'GBP',  targetAmount, targetCurrency = 'GBP', base64EncodedPhoto) {\n    return this.savingsGoals.createSavingsGoal(accessToken, savingsGoalId, name, currency,  targetAmount, targetCurrency, base64EncodedPhoto);\n  }\n\n  /**\n   * Deletes specific direct debit mandate\n   * @param {string} accessToken - the oauth bearer token.\n   * @param {string} savingsGoalId - the unique mandate ID\n   * @return {Promise} - the http request promise\n   */\n  deleteSavingsGoal (accessToken, savingsGoalId) {\n    return this.savingsGoals.deleteSavingsGoal(accessToken, savingsGoalId);\n  }\n\n  /**\n   * Gets the customer's card\n   * @param {string=} accessToken - the oauth bearer token.  If not\n   * specified, the accessToken on the options object is used.\n   * @return {Promise} - the http request promise\n   */\n  getCard (accessToken = this.config.accessToken) {\n    return this.card.getCard(accessToken);\n  }\n\n  /**\n   * Exchanges the authorization code for an access token\n   * @param {string} authorizationCode - the authorization code, acquired from the user agent after the\n   * user authenticates with starling\n   * @return {Promise} - the http request promise\n   */\n  getAccessToken (authorizationCode) {\n    return this.oAuth.getAccessToken(authorizationCode);\n  }\n\n  /**\n   * Exchanges the authorization code for an access token\n   * @param {string} refreshToken - the oauth refresh token, used to claim a new access token when the access token\n   * expires. A new refresh token is also returned.\n   * @return {Promise} - the http request promise\n   */\n  refreshAccessToken (refreshToken) {\n    return this.oAuth.refreshAccessToken(refreshToken);\n  }\n}\n\nmodule.exports = Starling;\n","export const defaultHeaders = (accessToken) => {\n  return {\n    Accept: 'application/json',\n    Authorization: `Bearer ${accessToken}`\n  };\n};\n\nexport const postHeaders = (accessToken) => {\n  return {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n    Authorization: `Bearer ${accessToken}`\n  };\n};","\nconst runRules = (pos, name, rules, value) => {\n  const valueType = typeof value;\n\n  if (rules[0] == 'optional') {\n    if (value && (valueType !== rules[1])) {\n      return `${name} parameter in position ${pos} is an optional ${rules[1]} but was ${valueType}`\n    }\n  }\n  if (rules[0] == 'required') {\n    if (value && (valueType !== rules[1])) {\n      return `${name} parameter in position ${pos} is a required ${rules[1]} but was ${valueType}`\n    } else if (!value) {\n      return `${name} parameter in position ${pos} is a required ${rules[1]} but was ${value}`\n    }\n  }\n};\n\nexport const  typeValidation = (args, def) => {\n  let problems = [];\n  for (let i = 0; i < def.length; i++) {\n    const pos = i;\n    const name = def[i].name;\n    const rules = def[i].validations;\n    const value = i <= args.length ? args[i] : undefined;\n    const problem = runRules(pos, name, rules, value);\n    if (problem) problems.push(problem);\n  }\n\n  if (problems.length) {\n    throw problems;\n  }\n\n};\n\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZW50aXRpZXMvYWNjb3VudC5qcyIsInNyYy9lbnRpdGllcy9hZGRyZXNzLmpzIiwic3JjL2VudGl0aWVzL2NhcmQuanMiLCJzcmMvZW50aXRpZXMvY29udGFjdC5qcyIsInNyYy9lbnRpdGllcy9jdXN0b21lci5qcyIsInNyYy9lbnRpdGllcy9tYW5kYXRlLmpzIiwic3JjL2VudGl0aWVzL29hdXRoLmpzIiwic3JjL2VudGl0aWVzL3BheW1lbnQuanMiLCJzcmMvZW50aXRpZXMvc2F2aW5nc0dvYWxzLmpzIiwic3JjL2VudGl0aWVzL3RyYW5zYWN0aW9uLmpzIiwic3JjL2VudGl0aWVzL3dob0FtSS5qcyIsInNyYy9zdGFybGluZy5qcyIsInNyYy91dGlscy9odHRwLmpzIiwic3JjL3V0aWxzL3ZhbGlkYXRvci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNLQSxNQUFNLE1BQU0scUJBQU0sMEJBQU4sQ0FBWjs7QUFFQTs7OztNQUdNLE87O0FBRUo7Ozs7QUFJQSxxQkFBYSxPQUFiLEVBQXNCO0FBQUE7O0FBQ3BCLFdBQUssT0FBTCxHQUFlLE9BQWY7QUFDRDs7QUFFRDs7Ozs7Ozs7O2lDQUtZLFcsRUFBYTtBQUN2Qix1Q0FBZSxTQUFmLEVBQTBCLDZCQUExQjtBQUNBLFlBQU0sTUFBUyxLQUFLLE9BQUwsQ0FBYSxNQUF0QixxQkFBTjtBQUNBLHFCQUFXLEdBQVg7O0FBRUEsZUFBTyxxQkFBTTtBQUNYLGtCQUFRLEtBREc7QUFFWCxrQkFGVztBQUdYLG1CQUFTLDBCQUFlLFdBQWY7QUFIRSxTQUFOLENBQVA7QUFLRDs7O2lDQU9XLFcsRUFBYTtBQUN2Qix1Q0FBZSxTQUFmLEVBQTBCLDZCQUExQjtBQUNBLFlBQU0sTUFBUyxLQUFLLE9BQUwsQ0FBYSxNQUF0Qiw2QkFBTjtB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QWtGLFNBQWxGO0FBQ0Q7QUFDRjtBQUNELFFBQUksTUFBTSxDQUFOLEtBQVksVUFBaEIsRUFBNEI7QUFDMUIsVUFBSSxTQUFVLGNBQWMsTUFBTSxDQUFOLENBQTVCLEVBQXVDO0FBQ3JDLGVBQVUsSUFBViwrQkFBd0MsR0FBeEMsdUJBQTZELE1BQU0sQ0FBTixDQUE3RCxpQkFBaUYsU0FBakY7QUFDRCxPQUZELE1BRU8sSUFBSSxDQUFDLEtBQUwsRUFBWTtBQUNqQixlQUFVLElBQVYsK0JBQXdDLEdBQXhDLHVCQUE2RCxNQUFNLENBQU4sQ0FBN0QsaUJBQWlGLEtBQWpGO0FBQ0Q7QUFDRjtBQUNGLEdBZkQ7O0FBaUJPLE1BQU8sMENBQWlCLFNBQWpCLGNBQWlCLENBQUMsSUFBRCxFQUFPLEdBQVAsRUFBZTtBQUM1QyxRQUFJLFdBQVcsRUFBZjtBQUNBLFNBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxJQUFJLE1BQXhCLEVBQWdDLEdBQWhDLEVBQXFDO0FBQ25DLFVBQU0sTUFBTSxDQUFaO0FBQ0EsVUFBTSxPQUFPLElBQUksQ0FBSixFQUFPLElBQXBCO0FBQ0EsVUFBTSxRQUFRLElBQUksQ0FBSixFQUFPLFdBQXJCO0FBQ0EsVUFBTSxRQUFRLEtBQUssS0FBSyxNQUFWLEdBQW1CLEtBQUssQ0FBTCxDQUFuQixHQUE2QixTQUEzQztBQUNBLFVBQU0sVUFBVSxTQUFTLEdBQVQsRUFBYyxJQUFkLEVBQW9CLEtBQXBCLEVBQTJCLEtBQTNCLENBQWhCO0FBQ0EsVUFBSSxPQUFKLEVBQWEsU0FBUyxJQUFULENBQWMsT0FBZDtBQUNkOztBQUVELFFBQUksU0FBUyxNQUFiLEVBQXFCO0FBQ25CLFlBQU0sUUFBTjtBQUNEO0FBRUYsR0FmTSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7ZGVmYXVsdEhlYWRlcnN9IGZyb20gJy4uL3V0aWxzL2h0dHAnO1xuaW1wb3J0IHt0eXBlVmFsaWRhdGlvbn0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdG9yJztcblxuY29uc3QgbG9nID0gZGVidWcoJ3N0YXJsaW5nOmFjY291bnQtc2VydmljZScpO1xuXG4vKipcbiAqIFNlcnZpY2UgdG8gaW50ZXJhY3Qgd2l0aCBhIGN1c3RvbWVyJ3MgYWNjb3VudFxuICovXG5jbGFzcyBBY2NvdW50IHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgYWNjb3VudCBjbGllbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBhcHBsaWNhdGlvbiBjb25maWdcbiAgICovXG4gIGNvbnN0cnVjdG9yIChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgYSBjdXN0b21lcidzIGFjY291bnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlblxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0QWNjb3VudCAoYWNjZXNzVG9rZW4pIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGdldEFjY291bnRQYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMuYXBpVXJsfS9hcGkvdjEvYWNjb3VudHNgO1xuICAgIGxvZyhgR0VUICR7dXJsfWApO1xuXG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyhhY2Nlc3NUb2tlbilcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIGN1c3RvbWVyJ3MgYmFsYW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRCYWxhbmNlIChhY2Nlc3NUb2tlbikge1xuICAgIHR5cGVWYWxpZGF0aW9uKGFyZ3VtZW50cywgZ2V0QmFsYW5jZVBhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9hY2NvdW50cy9iYWxhbmNlYDtcbiAgICBsb2coYEdFVCAke3VybH1gKTtcblxuICAgIHJldHVybiBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsLFxuICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMoYWNjZXNzVG9rZW4pXG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgZ2V0QWNjb3VudFBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHtuYW1lOiAnYWNjZXNzVG9rZW4nLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX1cbiAgXTtcblxuY29uc3QgZ2V0QmFsYW5jZVBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHtuYW1lOiAnYWNjZXNzVG9rZW4nLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX1cbiAgXTtcblxubW9kdWxlLmV4cG9ydHMgPSBBY2NvdW50O1xuIiwiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBkZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQge2RlZmF1bHRIZWFkZXJzfSBmcm9tICcuLi91dGlscy9odHRwJztcbmltcG9ydCB7dHlwZVZhbGlkYXRpb259IGZyb20gJy4uL3V0aWxzL3ZhbGlkYXRvcic7XG5cbmNvbnN0IGxvZyA9IGRlYnVnKCdzdGFybGluZzphZGRyZXNzLXNlcnZpY2UnKTtcblxuLyoqXG4gKiBTZXJ2aWNlIHRvIGludGVyYWN0IHdpdGggYSBjdXN0b21lciBhZGRyZXNzXG4gKi9cbmNsYXNzIEFkZHJlc3Mge1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBhZGRyZXNzIGNsaWVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyc1xuICAgKi9cbiAgY29uc3RydWN0b3IgKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhIGN1c3RvbWVyJ3MgYWRkcmVzc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0QWRkcmVzc2VzIChhY2Nlc3NUb2tlbikge1xuICAgIHR5cGVWYWxpZGF0aW9uKGFyZ3VtZW50cywgZ2V0QWRkcmVzc1BhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9hZGRyZXNzZXNgO1xuICAgIGxvZyhgR0VUICR7dXJsfWApO1xuXG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyhhY2Nlc3NUb2tlbilcbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBnZXRBZGRyZXNzUGFyYW1ldGVyRGVmaW5pdGlvbiA9IFtcbiAge25hbWU6ICdhY2Nlc3NUb2tlbicsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfVxuICBdO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFkZHJlc3M7XG4iLCJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7ZGVmYXVsdEhlYWRlcnN9IGZyb20gJy4uL3V0aWxzL2h0dHAnO1xuaW1wb3J0IHt0eXBlVmFsaWRhdGlvbn0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdG9yJztcblxuY29uc3QgbG9nID0gZGVidWcoJ3N0YXJsaW5nOmNhcmQtc2VydmljZScpO1xuXG4vKipcbiAqIFNlcnZpY2UgdG8gaW50ZXJhY3Qgd2l0aCBhIGN1c3RvbWVyIGNhcmRcbiAqL1xuY2xhc3MgQ2FyZCB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIGNsaWVudCdzIGNhcmRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnNcbiAgICovXG4gIGNvbnN0cnVjdG9yIChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgYSBjdXN0b21lcidzIGNhcmRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGdldENhcmQgKGFjY2Vzc1Rva2VuKSB7XG4gICAgdHlwZVZhbGlkYXRpb24oYXJndW1lbnRzLCBnZXRDYXJkUGFyYW1ldGVyRGVmaW5pdGlvbik7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5vcHRpb25zLmFwaVVybH0vYXBpL3YxL2NhcmRzYDtcbiAgICBsb2coYEdFVCAke3VybH1gKTtcblxuICAgIHJldHVybiBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsLFxuICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMoYWNjZXNzVG9rZW4pXG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgZ2V0Q2FyZFBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHtuYW1lOiAnYWNjZXNzVG9rZW4nLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX1cbiAgXTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYXJkO1xuIiwiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBkZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQge2RlZmF1bHRIZWFkZXJzLCBwb3N0SGVhZGVyc30gZnJvbSAnLi4vdXRpbHMvaHR0cCc7XG5pbXBvcnQge3R5cGVWYWxpZGF0aW9ufSBmcm9tICcuLi91dGlscy92YWxpZGF0b3InO1xuXG5jb25zdCBsb2cgPSBkZWJ1Zygnc3Rhcmxpbmc6Y29udGFjdC1zZXJ2aWNlJyk7XG5cbi8qKlxuICogU2VydmljZSB0byBpbnRlcmFjdCB3aXRoIGEgY3VzdG9tZXIncyBjb250YWN0cyAocGF5ZWVzKVxuICovXG5jbGFzcyBDb250YWN0IHtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGNvbnRhY3Qgc2VydmljZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyc1xuICAgKi9cbiAgY29uc3RydWN0b3IgKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1c3RvbWVyJ3MgY29udGFjdHMgKHBheWVlcylcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGdldENvbnRhY3RzIChhY2Nlc3NUb2tlbikge1xuICAgIHR5cGVWYWxpZGF0aW9uKGFyZ3VtZW50cywgZ2V0Q29udGFjdHNQYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMuYXBpVXJsfS9hcGkvdjEvY29udGFjdHNgO1xuICAgIGxvZyhgR0VUICR7dXJsfWApO1xuXG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyhhY2Nlc3NUb2tlbilcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgc3BlY2lmaWMgY29udGFjdCdzIChwYXllZSkgYWNjb3VudCBkZXRhaWxzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb250YWN0SWQgLSB0aGUgY29udGFjdCdzIElELlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0Q29udGFjdEFjY291bnQgKGFjY2Vzc1Rva2VuLCBjb250YWN0SWQpIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGdldENvbnRhY3RBY2NvdW50UGFyYW1ldGVyRGVmaW5pdGlvbik7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5vcHRpb25zLmFwaVVybH0vYXBpL3YxL2NvbnRhY3RzLyR7Y29udGFjdElkfS9hY2NvdW50c2A7XG4gICAgbG9nKGBHRVQgJHt1cmx9YCk7XG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyhhY2Nlc3NUb2tlbilcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY29udGFjdCAocGF5ZWUpIGZvciB0aGUgY3VzdG9tZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSB0aGUgbmFtZSBvZiB0aGUgbmV3IGNvbnRhY3QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2NvdW50VHlwZSAtIHRoZSBhY2NvdW50IHR5cGUgKGRvbWVzdGljIG9yIGludGVybmF0aW9uYWwpLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjb3VudE51bWJlciAtIHRoZSBjb250YWN0J3MgYmFuayBhY2NvdW50IG51bWJlci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHNvcnRDb2RlIC0gdGhlIGNvbnRhY3QncyBzb3J0IGNvZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjdXN0b21lcklkIC0gdGhlIGN1c3RvbWVyJ3MgSUQuIChvcHRpb25hbClcbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGNyZWF0ZUNvbnRhY3QgKGFjY2Vzc1Rva2VuLCBuYW1lLCBhY2NvdW50VHlwZSwgYWNjb3VudE51bWJlciwgc29ydENvZGUsIGN1c3RvbWVySWQpIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGNyZWF0ZUNvbnRhY3RQYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMuYXBpVXJsfS9hcGkvdjEvY29udGFjdHNgO1xuICAgIGxvZyhgUE9TVCAke3VybH1gKTtcbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBwb3N0SGVhZGVycyhhY2Nlc3NUb2tlbiksXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFjY291bnRUeXBlLFxuICAgICAgICBhY2NvdW50TnVtYmVyLFxuICAgICAgICBzb3J0Q29kZSxcbiAgICAgICAgY3VzdG9tZXJJZFxuICAgICAgfSksXG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGEgc3BlY2lmaWMgY29udGFjdCAocGF5ZWUpIGZyb20gdGhlIGN1c3RvbWVyJ3MgYWNjb3VudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29udGFjdElkIC0gdGhlIElkZW50aWZpZXIgb2YgdGhlIGNvbnRhY3QgdG8gYmUgZGVsZXRlZC5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGRlbGV0ZUNvbnRhY3QgKGFjY2Vzc1Rva2VuLCBjb250YWN0SWQpIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGRlbGV0ZUNvbnRhY3RQYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMuYXBpVXJsfS9hcGkvdjEvY29udGFjdHMvJHtjb250YWN0SWR9YDtcbiAgICBsb2coYERFTEVURSAke3VybH1gKTtcbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIHVybCxcbiAgICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzKGFjY2Vzc1Rva2VuKSxcbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBnZXRDb250YWN0c1BhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHtuYW1lOiAnYWNjZXNzVG9rZW4nLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX1cbiAgXTtcblxuY29uc3QgZ2V0Q29udGFjdEFjY291bnRQYXJhbWV0ZXJEZWZpbml0aW9uID0gW1xuICB7bmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119LFxuICB7bmFtZTogJ2NvbnRhY3RJZCcsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfVxuICBdO1xuXG5jb25zdCBjcmVhdGVDb250YWN0UGFyYW1ldGVyRGVmaW5pdGlvbiA9IFtcbiAge25hbWU6ICdhY2Nlc3NUb2tlbicsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfSxcbiAge25hbWU6ICduYW1lJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119LFxuICB7bmFtZTogJ2FjY291bnRUeXBlJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119LFxuICB7bmFtZTogJ2FjY291bnROdW1iZXInLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX0sXG4gIHtuYW1lOiAnc29ydENvZGUnLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX0sXG4gIHtuYW1lOiAnY3VzdG9tZXJJZCcsIHZhbGlkYXRpb25zOiBbJ29wdGlvbmFsJywgJ3N0cmluZyddfVxuICBdO1xuXG5jb25zdCBkZWxldGVDb250YWN0UGFyYW1ldGVyRGVmaW5pdGlvbiA9IFtcbiAge25hbWU6ICdhY2Nlc3NUb2tlbicsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfSxcbiAge25hbWU6ICdjb250YWN0SWQnLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX1cbl07XG5cbm1vZHVsZS5leHBvcnRzID0gQ29udGFjdDtcbiIsImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHtkZWZhdWx0SGVhZGVyc30gZnJvbSAnLi4vdXRpbHMvaHR0cCc7XG5pbXBvcnQge3R5cGVWYWxpZGF0aW9ufSBmcm9tICcuLi91dGlscy92YWxpZGF0b3InO1xuXG5jb25zdCBsb2cgPSBkZWJ1Zygnc3Rhcmxpbmc6Y3VzdG9tZXItc2VydmljZScpO1xuXG4vKipcbiAqIFNlcnZpY2UgdG8gaW50ZXJhY3Qgd2l0aCBhIGN1c3RvbWVyXG4gKi9cbmNsYXNzIEN1c3RvbWVyIHtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGN1c3RvbWVyIHNlcnZpY2VcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnNcbiAgICovXG4gIGNvbnN0cnVjdG9yIChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXN0b21lcidzIGRldGFpbHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGdldEN1c3RvbWVyIChhY2Nlc3NUb2tlbikge1xuICAgIHR5cGVWYWxpZGF0aW9uKGFyZ3VtZW50cywgZ2V0Q3VzdG9tZXJQYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMuYXBpVXJsfS9hcGkvdjEvY3VzdG9tZXJzYDtcbiAgICBsb2coYEdFVCAke3VybH1gKTtcblxuICAgIHJldHVybiBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsLFxuICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMoYWNjZXNzVG9rZW4pXG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgZ2V0Q3VzdG9tZXJQYXJhbWV0ZXJEZWZpbml0aW9uID0gW1xuICB7bmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119XG4gIF07XG5cbm1vZHVsZS5leHBvcnRzID0gQ3VzdG9tZXI7XG4iLCJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7ZGVmYXVsdEhlYWRlcnN9IGZyb20gJy4uL3V0aWxzL2h0dHAnO1xuaW1wb3J0IHt0eXBlVmFsaWRhdGlvbn0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdG9yJztcblxuY29uc3QgbG9nID0gZGVidWcoJ3N0YXJsaW5nOm1hbmRhdGUtc2VydmljZScpO1xuXG5cbi8qKlxuICogU2VydmljZSB0byBpbnRlcmFjdCB3aXRoIGEgY3VzdG9tZXIncyB0cmFuc2FjdGlvbnNcbiAqL1xuY2xhc3MgTWFuZGF0ZSB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgdHJhbnNhY3Rpb24gc2VydmljZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyc1xuICAgKi9cbiAgY29uc3RydWN0b3IgKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYSBsaXN0IG9mIHRoZSBjdXN0b21lcidzIGN1cnJlbnQgZGlyZWN0IGRlYml0IG1hbmRhdGVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBsaXN0TWFuZGF0ZXMgKGFjY2Vzc1Rva2VuKSB7XG4gICAgdHlwZVZhbGlkYXRpb24oYXJndW1lbnRzLCBsaXN0TWFuZGF0ZXNQYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMuYXBpVXJsfS9hcGkvdjEvZGlyZWN0LWRlYml0L21hbmRhdGVzYDtcbiAgICBsb2coYEdFVCAke3VybH1gKTtcbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHVybCxcbiAgICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzKGFjY2Vzc1Rva2VuKVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgc3BlY2lmaWMgZGlyZWN0IGRlYml0IG1hbmRhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hbmRhdGVJZCAtIHRoZSB1bmlxdWUgbWFuZGF0ZSBJRFxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZGVsZXRlTWFuZGF0ZSAoYWNjZXNzVG9rZW4sIG1hbmRhdGVJZCkge1xuICAgIHR5cGVWYWxpZGF0aW9uKGFyZ3VtZW50cywgZGVsZXRlTWFuZGF0ZVBhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9kaXJlY3QtZGViaXQvbWFuZGF0ZXMvJHttYW5kYXRlSWR9YDtcbiAgICBsb2coYERFTEVURSAke3VybH1gKTtcbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIHVybCxcbiAgICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzKGFjY2Vzc1Rva2VuKVxuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IGxpc3RNYW5kYXRlc1BhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHtuYW1lOiAnYWNjZXNzVG9rZW4nLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX1cbl07XG5cbmNvbnN0IGRlbGV0ZU1hbmRhdGVQYXJhbWV0ZXJEZWZpbml0aW9uID0gW1xuICB7bmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119LFxuICB7bmFtZTogJ21hbmRhdGVJZCcsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfVxuXTtcblxubW9kdWxlLmV4cG9ydHMgPSBNYW5kYXRlO1xuIiwiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBkZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQge3R5cGVWYWxpZGF0aW9ufSBmcm9tICcuLi91dGlscy92YWxpZGF0b3InO1xuXG5jb25zdCBBQ0NFU1NfVE9LRU5fR1JBTlRfVFlQRSA9ICdhdXRob3JpemF0aW9uX2NvZGUnO1xuY29uc3QgUkVGUkVTSF9UT0tFTl9HUkFOVF9UWVBFID0gJ3JlZnJlc2hfdG9rZW4nO1xuXG5jb25zdCBsb2cgPSBkZWJ1Zygnc3Rhcmxpbmc6b2F1dGgtc2VydmljZScpO1xuXG4vKipcbiAqIFNlcnZpY2UgdG8gaW50ZXJhY3Qgd2l0aCBhIHRoZSBvYXV0aCBlbmRwb2ludFxuICovXG5jbGFzcyBPQXV0aCB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBvYXV0aCBzZXJ2aWNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzXG4gICAqL1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogRXhjaGFuZ2VzIHRoZSBhdXRob3JpemF0aW9uIGNvZGUgZm9yIGFuIGFjY2VzcyB0b2tlblxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0aG9yaXphdGlvbkNvZGUgLSB0aGUgYXV0aG9yaXphdGlvbiBjb2RlLCBhY3F1aXJlZCBmcm9tIHRoZSB1c2VyIGFnZW50IGFmdGVyIHRoZVxuICAgKiB1c2VyIGF1dGhlbnRpY2F0ZXMgd2l0aCBzdGFybGluZ1xuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0QWNjZXNzVG9rZW4gKGF1dGhvcml6YXRpb25Db2RlKSB7XG4gICAgdHlwZVZhbGlkYXRpb24oYXJndW1lbnRzLCBhdXRob3JpemF0aW9uQ29kZVBhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIHJldHVybiB0aGlzLmdldE9BdXRoVG9rZW4oe1xuICAgICAgJ2NvZGUnOiBhdXRob3JpemF0aW9uQ29kZSxcbiAgICAgICdncmFudF90eXBlJzogQUNDRVNTX1RPS0VOX0dSQU5UX1RZUEUsXG4gICAgICAnY2xpZW50X2lkJzogdGhpcy5vcHRpb25zLmNsaWVudElkLFxuICAgICAgJ2NsaWVudF9zZWNyZXQnOiB0aGlzLm9wdGlvbnMuY2xpZW50U2VjcmV0LFxuICAgICAgJ3JlZGlyZWN0X3VyaSc6IHRoaXMub3B0aW9ucy5yZWRpcmVjdFVyaVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4Y2hhbmdlcyB0aGUgYXV0aG9yaXphdGlvbiBjb2RlIGZvciBhbiBhY2Nlc3MgdG9rZW5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZnJlc2hUb2tlbiAtIHRoZSBvYXV0aCByZWZyZXNoIHRva2VuLCB1c2VkIHdoZW4gdGhlIGFjY2VzcyB0b2tlblxuICAgKiBleHBpcmVzIHRvIGNsYWltIGEgbmV3IGFjY2VzcyB0b2tlbi5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIHJlZnJlc2hBY2Nlc3NUb2tlbiAocmVmcmVzaFRva2VuKSB7XG4gICAgdHlwZVZhbGlkYXRpb24oYXJndW1lbnRzLCByZWZyZXNoVG9rZW5QYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICByZXR1cm4gdGhpcy5nZXRPQXV0aFRva2VuKHtcbiAgICAgICdyZWZyZXNoX3Rva2VuJzogcmVmcmVzaFRva2VuLFxuICAgICAgJ2dyYW50X3R5cGUnOiBSRUZSRVNIX1RPS0VOX0dSQU5UX1RZUEUsXG4gICAgICAnY2xpZW50X2lkJzogdGhpcy5vcHRpb25zLmNsaWVudElkLFxuICAgICAgJ2NsaWVudF9zZWNyZXQnOiB0aGlzLm9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYWNjZXNzIHRva2VuIGZyb20gdGhlIHN0YXJsaW5nIG9hdXRoIGVuZHBvaW50XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXMgLSB0aGUgcXVlcnkgcGFyYW1zIHBhc3NlZCB0byB0aGUgb2F1dGggZW5kcG9pbnQgYXMgcGVyIHRoZSBvYXV0aCBzcGVjXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRPQXV0aFRva2VuIChwYXJhbXMpIHtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5jbGllbnRJZCkge1xuICAgICAgdGhyb3cgRXJyb3IoJ2NsaWVudElkIGlzIG5vdCBjb25maWd1cmVkJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuY2xpZW50U2VjcmV0KSB7XG4gICAgICB0aHJvdyBFcnJvcignY2xpZW50U2VjcmV0IGlzIG5vdCBjb25maWd1cmVkJyk7XG4gICAgfVxuXG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5vcHRpb25zLm9hdXRoVXJsfS9vYXV0aC9hY2Nlc3MtdG9rZW5gO1xuICAgIGxvZyhgUE9TVCAke3VybH0gcXVlcnlQYXJhbXM6JHtKU09OLnN0cmluZ2lmeShwYXJhbXMpfWApO1xuXG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIHVybCxcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICB9LFxuICAgICAgcGFyYW1zOiBwYXJhbXNcbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCByZWZyZXNoVG9rZW5QYXJhbWV0ZXJEZWZpbml0aW9uID0gW1xuICB7bmFtZTogJ3JlZnJlc2hUb2tlbicsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfVxuXTtcblxuY29uc3QgYXV0aG9yaXphdGlvbkNvZGVQYXJhbWV0ZXJEZWZpbml0aW9uID0gW1xuICB7bmFtZTogJ2F1dGhvcml6YXRpb25Db2RlJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119XG5dO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE9BdXRoO1xuIiwiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBkZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQge2RlZmF1bHRIZWFkZXJzLCBwb3N0SGVhZGVyc30gZnJvbSAnLi4vdXRpbHMvaHR0cCc7XG5pbXBvcnQge3R5cGVWYWxpZGF0aW9ufSBmcm9tICcuLi91dGlscy92YWxpZGF0b3InO1xuXG5jb25zdCBsb2cgPSBkZWJ1Zygnc3Rhcmxpbmc6cGF5bWVudC1zZXJ2aWNlJyk7XG5cblxuLyoqXG4gKiBTZXJ2aWNlIHRvIGludGVyYWN0IHdpdGggYSBjdXN0b21lcidzIHRyYW5zYWN0aW9uc1xuICovXG5jbGFzcyBQYXltZW50IHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyB0cmFuc2FjdGlvbiBzZXJ2aWNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzXG4gICAqL1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogTWFrZXMgYSBwYXltZW50IG9uIGJlaGFsZiBvZiB0aGUgY3VzdG9tZXIgdG8gYW5vdGhlciBVSyBiYW5rIGFjY291bnQgdXNpbmcgdGhlIEZhc3RlciBQYXltZW50cyBuZXR3b3JrXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqICBAcGFyYW0ge3N0cmluZ30gZGVzdGluYXRpb25BY2NvdW50VWlkIC0gdGhlIGFjY291bnQgaWRlbnRpZmllciBvZiB0aGUgcmVjaXBpZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWZlcmVuY2UgLSBUaGUgcGF5bWVudCByZWZlcmVuY2UsIG1heC4gMTggY2hhcmFjdGVycy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGFtb3VudCAtIHRoZSBhbW91bnQgdG8gYmUgc2VuZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBjdXJyZW5jeSAtIHRoZSBjdXJyZW5jeSwgb3B0aW9uYWwsIGRlZmF1bHRzIHRvIFwiR0JQXCIuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBtYWtlTG9jYWxQYXltZW50IChhY2Nlc3NUb2tlbiwgZGVzdGluYXRpb25BY2NvdW50VWlkLCByZWZlcmVuY2UsIGFtb3VudCwgY3VycmVuY3kpIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIG1ha2VMb2NhbFBheW1lbnRQYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMuYXBpVXJsfS9hcGkvdjEvcGF5bWVudHMvbG9jYWxgO1xuICAgIGxvZyhgUE9TVCAke3VybH1gKTtcbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBwb3N0SGVhZGVycyhhY2Nlc3NUb2tlbiksXG4gICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGRlc3RpbmF0aW9uQWNjb3VudFVpZCxcbiAgICAgICAgcGF5bWVudDoge1xuICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICBjdXJyZW5jeVxuICAgICAgICB9LFxuICAgICAgICByZWZlcmVuY2VcbiAgICAgIH0pXG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBMaXN0cyB0aGUgY3VzdG9tZXIncyBzY2hlZHVsZWQgcGF5bWVudHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGxpc3RTY2hlZHVsZWRQYXltZW50cyAoYWNjZXNzVG9rZW4pIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGxpc3RTY2hlZHVsZWRQYXltZW50c1BhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9wYXltZW50cy9zY2hlZHVsZWRgO1xuICAgIGxvZyhgR0VUICR7dXJsfWApO1xuICAgIHJldHVybiBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsLFxuICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMoYWNjZXNzVG9rZW4pXG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgbWFrZUxvY2FsUGF5bWVudFBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHtuYW1lOiAnYWNjZXNzVG9rZW4nLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX0sXG4gIHtuYW1lOiAnZGVzdGluYXRpb25BY2NvdW50VWlkJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119LFxuICB7bmFtZTogJ3JlZmVyZW5jZScsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfSxcbiAge25hbWU6ICdhbW91bnQnLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX0sXG4gIHtuYW1lOiAnY3VycmVuY3knLCB2YWxpZGF0aW9uczogWydvcHRpb25hbCcsICdzdHJpbmcnXX1cbl07XG5cbmNvbnN0IGxpc3RTY2hlZHVsZWRQYXltZW50c1BhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHtuYW1lOiAnYWNjZXNzVG9rZW4nLCB2YWxpZGF0aW9uczogWydyZXF1aXJlZCcsICdzdHJpbmcnXX1cbl07XG5cbm1vZHVsZS5leHBvcnRzID0gUGF5bWVudDtcbiIsImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHsgZGVmYXVsdEhlYWRlcnMsIHBvc3RIZWFkZXJzIH0gZnJvbSAnLi4vdXRpbHMvaHR0cCc7XG5pbXBvcnQgeyB0eXBlVmFsaWRhdGlvbiB9IGZyb20gJy4uL3V0aWxzL3ZhbGlkYXRvcic7XG5cbmNvbnN0IGxvZyA9IGRlYnVnKCdzdGFybGluZzpzYXZpbmctZ29hbHMtc2VydmljZScpO1xuXG4vKipcbiAqIFNlcnZpY2UgdG8gaW50ZXJhY3Qgd2l0aCBhIGN1c3RvbWVyJ3Mgc2F2aW5ncyBnb2Fsc1xuICovXG5jbGFzcyBTYXZpbmdzR29hbHMge1xuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHNhdmluZ3MgZ29hbCBzZXJ2aWNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzXG4gICAqL1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhIGxpc3Qgb2YgdGhlIGN1c3RvbWVyJ3Mgc2F2aW5ncyBnb2Fsc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgbGlzdFNhdmluZ3NHb2FscyAoYWNjZXNzVG9rZW4pIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGxpc3RTYXZpbmdzR29hbHNQYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMuYXBpVXJsfS9hcGkvdjEvc2F2aW5ncy1nb2Fsc2A7XG4gICAgbG9nKGBHRVQgJHt1cmx9YCk7XG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyhhY2Nlc3NUb2tlbilcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgc3BlY2lmaWMgc2F2aW5ncyBnb2FsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzYXZpbmdzR29hbElkIC0gdGhlIHNhdmluZ3MgZ29hbCdzIElELlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0U2F2aW5nc0dvYWwgKGFjY2Vzc1Rva2VuLCBzYXZpbmdzR29hbElkKSB7XG4gICAgdHlwZVZhbGlkYXRpb24oYXJndW1lbnRzLCBnZXRTYXZpbmdzR29hbFBhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9zYXZpbmdzLWdvYWxzLyR7c2F2aW5nc0dvYWxJZH1gO1xuICAgIGxvZyhgR0VUICR7dXJsfWApO1xuICAgIHJldHVybiBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsLFxuICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMoYWNjZXNzVG9rZW4pXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHNhdmluZ3MgZ29hbFxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2F2aW5nc0dvYWxJZCAtIHRoZSBzYXZpbmdzIGdvYWwncyBJRCwgZ2VuZXJhdGUgb25lIGlmIGNyZWF0aW5nIGEgZ29hbC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSB0aGUgbmFtZSBvZiB0aGUgbmV3IGNvbnRhY3QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjdXJyZW5jeSAtIHRoZSBjdXJyZW5jeSBvZiB0aGUgc2F2aW5ncyBnb2FsLiBEZWZhdWx0cyB0byAnR0JQJy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldEFtb3VudCAtIHRoZSB0YXJnZXQgYW1vdW50IGluIG1pbm9yIHVuaXRzIChlLmcuIDEyMzQgPT4gwqMxMi4zNCkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRDdXJyZW5jeSAtIHRoZSB0YXJnZXQgY3VycmVuY3ksIGFsc28gZGVmYXVsdHMgdG8gJ0dCUCcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlNjRFbmNvZGVkUGhvdG8gLSBiYXNlNjQgZW5jb2RlZCBpbWFnZSB0byBhc3NvY2lhdGUgd2l0aCB0aGUgZ29hbC4gKG9wdGlvbmFsKVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgY3JlYXRlU2F2aW5nc0dvYWwgKGFjY2Vzc1Rva2VuLCBzYXZpbmdzR29hbElkLCBuYW1lLCBjdXJyZW5jeSwgdGFyZ2V0QW1vdW50LCB0YXJnZXRDdXJyZW5jeSwgYmFzZTY0RW5jb2RlZFBob3RvKSB7XG4gICAgdHlwZVZhbGlkYXRpb24oYXJndW1lbnRzLCBjcmVhdGVTYXZpbmdzR29hbFBhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9zYXZpbmdzLWdvYWxzLyR7c2F2aW5nc0dvYWxJZH1gO1xuICAgIGxvZyhgUFVUICR7dXJsfWApO1xuICAgIHJldHVybiBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgdXJsLFxuICAgICAgaGVhZGVyczogcG9zdEhlYWRlcnMoYWNjZXNzVG9rZW4pLFxuICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBjdXJyZW5jeSxcbiAgICAgICAgdGFyZ2V0OiB7XG4gICAgICAgICAgdGFyZ2V0QW1vdW50LFxuICAgICAgICAgIHRhcmdldEN1cnJlbmN5XG4gICAgICAgIH0sXG4gICAgICAgIGJhc2U2NEVuY29kZWRQaG90b1xuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIHNwZWNpZmljIHNhdmluZ3MgZ29hbFxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2F2aW5nc0dvYWxJZCAtIHRoZSB1bmlxdWUgbWFuZGF0ZSBJRFxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZGVsZXRlU2F2aW5nc0dvYWwgKGFjY2Vzc1Rva2VuLCBzYXZpbmdzR29hbElkKSB7XG4gICAgdHlwZVZhbGlkYXRpb24oYXJndW1lbnRzLCBkZWxldGVTYXZpbmdzR29hbFBhcmFtZXRlckRlZmluaXRpb24pO1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMub3B0aW9ucy5hcGlVcmx9L2FwaS92MS9zYXZpbmdzLWdvYWxzLyR7c2F2aW5nc0dvYWxJZH1gO1xuICAgIGxvZyhgREVMRVRFICR7dXJsfWApO1xuICAgIHJldHVybiBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgdXJsLFxuICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMoYWNjZXNzVG9rZW4pXG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgbGlzdFNhdmluZ3NHb2Fsc1BhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHsgbmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9XG5dO1xuXG5jb25zdCBnZXRTYXZpbmdzR29hbFBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHsgbmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9LFxuICB7IG5hbWU6ICdzYXZpbmdzR29hbElkJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9XG5dO1xuXG5jb25zdCBkZWxldGVTYXZpbmdzR29hbFBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHsgbmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9LFxuICB7IG5hbWU6ICdzYXZpbmdzR29hbElkJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9XG5dO1xuXG5jb25zdCBjcmVhdGVTYXZpbmdzR29hbFBhcmFtZXRlckRlZmluaXRpb24gPSBbXG4gIHsgbmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9LFxuICB7IG5hbWU6ICdzYXZpbmdzR29hbElkJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9LFxuICB7IG5hbWU6ICduYW1lJywgdmFsaWRhdGlvbnM6IFsgJ3JlcXVpcmVkJywgJ3N0cmluZycgXSB9LFxuICB7IG5hbWU6ICdjdXJyZW5jeScsIHZhbGlkYXRpb25zOiBbICdyZXF1aXJlZCcsICdzdHJpbmcnIF0gfSxcbiAgeyBuYW1lOiAndGFyZ2V0QW1vdW50JywgdmFsaWRhdGlvbnM6IFsgJ29wdGlvbmFsJywgJ251bWJlcicgXSB9LFxuICB7IG5hbWU6ICd0YXJnZXRDdXJyZW5jeScsIHZhbGlkYXRpb25zOiBbICdvcHRpb25hbCcsICdzdHJpbmcnIF0gfSxcbiAgeyBuYW1lOiAnYmFzZTY0RW5jb2RlZFBob3RvJywgdmFsaWRhdGlvbnM6IFsgJ29wdGlvbmFsJywgJ3N0cmluZycgXSB9XG5dO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNhdmluZ3NHb2FscztcbiIsImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHtkZWZhdWx0SGVhZGVyc30gZnJvbSAnLi4vdXRpbHMvaHR0cCc7XG5pbXBvcnQge3R5cGVWYWxpZGF0aW9ufSBmcm9tICcuLi91dGlscy92YWxpZGF0b3InO1xuXG5jb25zdCBsb2cgPSBkZWJ1Zygnc3Rhcmxpbmc6dHJhbnNhY3Rpb24tc2VydmljZScpO1xuXG5jb25zdCB0cmFuc2FjdGlvblNvdXJjZSA9IChzb3VyY2UpID0+IHtcbiAgaWYgKHNvdXJjZSA9PT0gJ01BU1RFUl9DQVJEJykge1xuICAgIHJldHVybiAnL21hc3RlcmNhcmQnO1xuICB9IGVsc2UgaWYgKHNvdXJjZSA9PT0gJ0ZBU1RFUl9QQVlNRU5UU19JTicpIHtcbiAgICByZXR1cm4gJy9mcHMvaW4nO1xuICB9IGVsc2UgaWYgKHNvdXJjZSA9PT0gJ0ZBU1RFUl9QQVlNRU5UU19PVVQnKSB7XG4gICAgcmV0dXJuICcvZnBzL291dCc7XG4gIH0gZWxzZSBpZiAoc291cmNlID09PSAnRElSRUNUX0RFQklUJykge1xuICAgIHJldHVybiAnL2RpcmVjdC1kZWJpdCc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICcnXG4gIH1cbn07XG5cbi8qKlxuICogU2VydmljZSB0byBpbnRlcmFjdCB3aXRoIGEgY3VzdG9tZXIncyB0cmFuc2FjdGlvbnNcbiAqL1xuY2xhc3MgVHJhbnNhY3Rpb24ge1xuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHRyYW5zYWN0aW9uIHNlcnZpY2VcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnNcbiAgICovXG4gIGNvbnN0cnVjdG9yIChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXN0b21lcidzIHRyYW5zYWN0aW9ucyBvdmVyIHRoZSBnaXZlbiBwZXJpb2RcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGZyb21EYXRlIC0gZmlsdGVyIHRyYW5zYWN0aW9ucyBhZnRlciB0aGlzIGRhdGUuIEZvcm1hdDogWVlZWS1NTS1ERFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9EYXRlIC0gZmlsdGVyIHRyYW5zYWN0aW9ucyBiZWZvcmUgdGhpcyBkYXRlLiBGb3JtYXQ6IFlZWVktTU0tRERcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBzb3VyY2UgLSB0aGUgdHJhbnNhY3Rpb24gdHlwZSAoZS5nLiBmYXN0ZXIgcGF5bWVudHMsIG1hc3RlcmNhcmQpLlxuICAgKiBJZiBub3Qgc3BlY2lmaWVkLCByZXN1bHRzIGFyZSBub3QgZmlsdGVyZWQgYnkgc291cmNlLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0VHJhbnNhY3Rpb25zIChhY2Nlc3NUb2tlbiwgZnJvbURhdGUsIHRvRGF0ZSwgc291cmNlKSB7XG4gICAgdHlwZVZhbGlkYXRpb24oYXJndW1lbnRzLCBnZXRUcmFuc2FjdGlvbnNQYXJhbWV0ZXJEZWZpbml0aW9uKTtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLm9wdGlvbnMuYXBpVXJsfS9hcGkvdjEvdHJhbnNhY3Rpb25zJHt0cmFuc2FjdGlvblNvdXJjZShzb3VyY2UpfWA7XG4gICAgbG9nKGBHRVQgJHt1cmx9IGZyb209JHtmcm9tRGF0ZX0gdG89JHt0b0RhdGV9YCk7XG5cbiAgICByZXR1cm4gYXhpb3Moe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHVybCxcbiAgICAgIHBhcmFtczoge1xuICAgICAgICBmcm9tOiBmcm9tRGF0ZSxcbiAgICAgICAgdG86IHRvRGF0ZVxuICAgICAgfSxcbiAgICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzKGFjY2Vzc1Rva2VuKVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGZ1bGwgZGV0YWlscyBvZiBhIHNpbmdsZSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0cmFuc2FjdGlvbklkIC0gdGhlIHVuaXF1ZSB0cmFuc2FjdGlvbiBJRFxuICAgKiBAcGFyYW0ge3N0cmluZz19IHNvdXJjZSAtIHRoZSB0cmFuc2FjdGlvbiB0eXBlIChlLmcuIGZhc3RlciBwYXltZW50cywgbWFzdGVyY2FyZCkuXG4gICAqIElmIG5vdCBzcGVjaWZpZWQsIG9ubHkgZ2VuZXJpYyB0cmFuc2FjdGlvbiBpbmZvcm1hdGlvbiB3aWxsIGJlIHJldHVybmVkLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0VHJhbnNhY3Rpb24gKGFjY2Vzc1Rva2VuLCB0cmFuc2FjdGlvbklkLCBzb3VyY2UpIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGdldFRyYW5zYWN0aW9uUGFyYW1ldGVyRGVmaW5pdGlvbik7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5vcHRpb25zLmFwaVVybH0vYXBpL3YxL3RyYW5zYWN0aW9ucyR7dHJhbnNhY3Rpb25Tb3VyY2Uoc291cmNlKX0vJHt0cmFuc2FjdGlvbklkfWA7XG4gICAgbG9nKGBHRVQgJHt1cmx9YCk7XG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyhhY2Nlc3NUb2tlbilcbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBnZXRUcmFuc2FjdGlvbnNQYXJhbWV0ZXJEZWZpbml0aW9uID0gW1xuICB7bmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119LFxuICB7bmFtZTogJ2Zyb21EYXRlJywgdmFsaWRhdGlvbnM6IFsnb3B0aW9uYWwnLCAnc3RyaW5nJ119LFxuICB7bmFtZTogJ3RvRGF0ZScsIHZhbGlkYXRpb25zOiBbJ29wdGlvbmFsJywgJ3N0cmluZyddfSxcbiAge25hbWU6ICdzb3VyY2UnLCB2YWxpZGF0aW9uczogWydvcHRpb25hbCcsICdzdHJpbmcnXX1cbl07XG5cbmNvbnN0IGdldFRyYW5zYWN0aW9uUGFyYW1ldGVyRGVmaW5pdGlvbiA9IFtcbiAge25hbWU6ICdhY2Nlc3NUb2tlbicsIHZhbGlkYXRpb25zOiBbJ3JlcXVpcmVkJywgJ3N0cmluZyddfSxcbiAge25hbWU6ICd0cmFuc2FjdGlvbklkJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119LFxuICB7bmFtZTogJ3NvdXJjZScsIHZhbGlkYXRpb25zOiBbJ29wdGlvbmFsJywgJ3N0cmluZyddfVxuXTtcblxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc2FjdGlvbjtcbiIsImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHtkZWZhdWx0SGVhZGVyc30gZnJvbSAnLi4vdXRpbHMvaHR0cCc7XG5pbXBvcnQge3R5cGVWYWxpZGF0aW9ufSBmcm9tICcuLi91dGlscy92YWxpZGF0b3InO1xuXG5jb25zdCBsb2cgPSBkZWJ1Zygnc3Rhcmxpbmc6d2hvLWFtLWktc2VydmljZScpO1xuXG4vKipcbiAqIFNlcnZpY2UgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgV2hvIEFtIEkgZW5kcG9pbnRcbiAqL1xuY2xhc3MgV2hvQW1JIHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgd2hvIGFtIEkgY2xpZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzXG4gICAqL1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBjdXN0b21lciBVVUlEIGFuZCBwZXJtaXNzaW9ucyBjb3JyZXNwb25kaW5nIHRvIHRoZSBhY2Nlc3MgdG9rZW4gcGFzc2VkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRNZSAoYWNjZXNzVG9rZW4pIHtcbiAgICB0eXBlVmFsaWRhdGlvbihhcmd1bWVudHMsIGdldE1lUGFyYW1ldGVyRGVmaW5pdGlvbik7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5vcHRpb25zLmFwaVVybH0vYXBpL3YxL21lYDtcbiAgICBsb2coYEdFVCAke3VybH1gKTtcblxuICAgIHJldHVybiBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsLFxuICAgICAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMoYWNjZXNzVG9rZW4pXG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgZ2V0TWVQYXJhbWV0ZXJEZWZpbml0aW9uID0gW1xuICB7bmFtZTogJ2FjY2Vzc1Rva2VuJywgdmFsaWRhdGlvbnM6IFsncmVxdWlyZWQnLCAnc3RyaW5nJ119XG4gIF07XG5cbm1vZHVsZS5leHBvcnRzID0gV2hvQW1JO1xuIiwiaW1wb3J0IEN1c3RvbWVyIGZyb20gJy4vZW50aXRpZXMvY3VzdG9tZXInO1xuaW1wb3J0IEFjY291bnQgZnJvbSAnLi9lbnRpdGllcy9hY2NvdW50JztcbmltcG9ydCBBZGRyZXNzIGZyb20gJy4vZW50aXRpZXMvYWRkcmVzcyc7XG5pbXBvcnQgVHJhbnNhY3Rpb24gZnJvbSAnLi9lbnRpdGllcy90cmFuc2FjdGlvbic7XG5pbXBvcnQgQ2FyZCBmcm9tICcuL2VudGl0aWVzL2NhcmQnO1xuaW1wb3J0IE9BdXRoIGZyb20gJy4vZW50aXRpZXMvb2F1dGgnO1xuaW1wb3J0IENvbnRhY3QgZnJvbSAnLi9lbnRpdGllcy9jb250YWN0JztcbmltcG9ydCBQYXltZW50IGZyb20gJy4vZW50aXRpZXMvcGF5bWVudCc7XG5pbXBvcnQgTWFuZGF0ZSBmcm9tICcuL2VudGl0aWVzL21hbmRhdGUnO1xuaW1wb3J0IFNhdmluZ3NHb2FscyBmcm9tICcuL2VudGl0aWVzL3NhdmluZ3NHb2Fscyc7XG5pbXBvcnQgV2hvQW1JIGZyb20gJy4vZW50aXRpZXMvd2hvQW1JJztcblxuLyoqXG4gKiBGYWNhZGUgdG8gZGlzcGF0Y2ggb3BlcmF0aW9ucyB0byBzZXJ2aWNlc1xuICovXG5jbGFzcyBTdGFybGluZyB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGUgc3RhcmxpbmcgY2xpZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyc1xuICAgKi9cbiAgY29uc3RydWN0b3IgKG9wdGlvbnMpIHtcbiAgICBjb25zdCBkZWZhdWx0cyA9IHtcbiAgICAgIGFwaVVybDogJ2h0dHBzOi8vYXBpLnN0YXJsaW5nYmFuay5jb20nLFxuICAgICAgb2F1dGhVcmw6ICdodHRwczovL29hdXRoLnN0YXJsaW5nYmFuay5jb20nLFxuICAgICAgY2xpZW50SWQ6ICcnLFxuICAgICAgY2xpZW50U2VjcmV0OiAnJ1xuICAgIH07XG5cbiAgICB0aGlzLmNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgIHRoaXMud2hvQW1JID0gbmV3IFdob0FtSSh0aGlzLmNvbmZpZyk7XG4gICAgdGhpcy5jdXN0b21lciA9IG5ldyBDdXN0b21lcih0aGlzLmNvbmZpZyk7XG4gICAgdGhpcy5hY2NvdW50ID0gbmV3IEFjY291bnQodGhpcy5jb25maWcpO1xuICAgIHRoaXMuYWRkcmVzcyA9IG5ldyBBZGRyZXNzKHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLnRyYW5zYWN0aW9uID0gbmV3IFRyYW5zYWN0aW9uKHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLnBheW1lbnQgPSBuZXcgUGF5bWVudCh0aGlzLmNvbmZpZyk7XG4gICAgdGhpcy5tYW5kYXRlID0gbmV3IE1hbmRhdGUodGhpcy5jb25maWcpO1xuICAgIHRoaXMuY29udGFjdCA9IG5ldyBDb250YWN0KHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLmNhcmQgPSBuZXcgQ2FyZCh0aGlzLmNvbmZpZyk7XG4gICAgdGhpcy5zYXZpbmdzR29hbHMgPSBuZXcgU2F2aW5nc0dvYWxzKHRoaXMuY29uZmlnKTtcbiAgICB0aGlzLm9BdXRoID0gbmV3IE9BdXRoKHRoaXMuY29uZmlnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXN0b21lciBVVUlEIGFuZCBwZXJtaXNzaW9ucyBjb3JyZXNwb25kaW5nIHRvIHRoZSBhY2Nlc3MgdG9rZW4gcGFzc2VkXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLiAgSWYgbm90XG4gICAqIHNwZWNpZmllZCwgdGhlIGFjY2Vzc1Rva2VuIG9uIHRoZSBvcHRpb25zIG9iamVjdCBpcyB1c2VkLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0TWUgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy53aG9BbUkuZ2V0TWUoYWNjZXNzVG9rZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1c3RvbWVyJ3MgZGV0YWlsc1xuICAgKiBAcGFyYW0ge3N0cmluZz19IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi4gSWYgbm90XG4gICAqIHNwZWNpZmllZCwgdGhlIGFjY2Vzc1Rva2VuIG9uIHRoZSBvcHRpb25zIG9iamVjdCBpcyB1c2VkLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0Q3VzdG9tZXIgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy5jdXN0b21lci5nZXRDdXN0b21lcihhY2Nlc3NUb2tlbik7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VzdG9tZXIncyBhY2NvdW50IGRldGFpbHNcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uICBJZiBub3RcbiAgICogc3BlY2lmaWVkLCB0aGUgYWNjZXNzVG9rZW4gb24gdGhlIG9wdGlvbnMgb2JqZWN0IGlzIHVzZWQuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRBY2NvdW50IChhY2Nlc3NUb2tlbiA9IHRoaXMuY29uZmlnLmFjY2Vzc1Rva2VuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWNjb3VudC5nZXRBY2NvdW50KGFjY2Vzc1Rva2VuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXN0b21lcidzIGJhbGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uICBJZiBub3RcbiAgICogc3BlY2lmaWVkLCB0aGUgYWNjZXNzVG9rZW4gb24gdGhlIG9wdGlvbnMgb2JqZWN0IGlzIHVzZWQuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRCYWxhbmNlIChhY2Nlc3NUb2tlbiA9IHRoaXMuY29uZmlnLmFjY2Vzc1Rva2VuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWNjb3VudC5nZXRCYWxhbmNlKGFjY2Vzc1Rva2VuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXN0b21lcidzIGFkZHJlc3NlcyAoY3VycmVudCBhbmQgcHJldmlvdXMpXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLiAgSWYgbm90XG4gICAqIHNwZWNpZmllZCwgdGhlIGFjY2Vzc1Rva2VuIG9uIHRoZSBvcHRpb25zIG9iamVjdCBpcyB1c2VkLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0QWRkcmVzc2VzIChhY2Nlc3NUb2tlbiA9IHRoaXMuY29uZmlnLmFjY2Vzc1Rva2VuKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkcmVzcy5nZXRBZGRyZXNzZXMoYWNjZXNzVG9rZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1c3RvbWVyJ3MgdHJhbnNhY3Rpb24gaGlzdG9yeVxuICAgKiBAcGFyYW0ge3N0cmluZz19IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi4gIElmIG5vdFxuICAgKiBzcGVjaWZpZWQsIHRoZSBhY2Nlc3NUb2tlbiBvbiB0aGUgb3B0aW9ucyBvYmplY3QgaXMgdXNlZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGZyb21EYXRlIC0gZmlsdGVyIHRyYW5zYWN0aW9ucyBhZnRlciB0aGlzIGRhdGUuIEZvcm1hdDogWVlZWS1NTS1ERCAob3B0aW9uYWwsXG4gICAqICAgZGVmYXVsdHMgdG8gbW9zdCByZWNlbnQgMTAwIHRyYW5zYWN0aW9ucylcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvRGF0ZSAtIGZpbHRlciB0cmFuc2FjdGlvbnMgYmVmb3JlIHRoaXMgZGF0ZS4gRm9ybWF0OiBZWVlZLU1NLUREIChvcHRpb25hbCxcbiAgICogICBkZWZhdWx0cyB0byBjdXJyZW50IGRhdGUgaWYgbm90IHByb3ZpZGVkKVxuICAgKiBAcGFyYW0ge3N0cmluZz19IHNvdXJjZSAtIHRoZSB0cmFuc2FjdGlvbiB0eXBlIChlLmcuIGZhc3RlciBwYXltZW50cywgbWFzdGVyY2FyZCkuXG4gICAqIElmIG5vdCBzcGVjaWZpZWQsIHJlc3VsdHMgYXJlIG5vdCBmaWx0ZXJlZCBieSBzb3VyY2UuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBnZXRUcmFuc2FjdGlvbnMgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4sIGZyb21EYXRlLCB0b0RhdGUsIHNvdXJjZSkge1xuICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9uLmdldFRyYW5zYWN0aW9ucyhhY2Nlc3NUb2tlbiwgZnJvbURhdGUsIHRvRGF0ZSwgc291cmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBmdWxsIGRldGFpbHMgb2YgYSBzaW5nbGUgdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uICBJZiBub3RcbiAgICogc3BlY2lmaWVkLCB0aGUgYWNjZXNzVG9rZW4gb24gdGhlIG9wdGlvbnMgb2JqZWN0IGlzIHVzZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0cmFuc2FjdGlvbklkIC0gdGhlIHVuaXF1ZSB0cmFuc2FjdGlvbiBJRFxuICAgKiBAcGFyYW0ge3N0cmluZz19IHNvdXJjZSAtIHRoZSB0cmFuc2FjdGlvbiB0eXBlIChlLmcuIGZhc3RlciBwYXltZW50cywgbWFzdGVyY2FyZCkuXG4gICAqIElmIG5vdCBzcGVjaWZpZWQsIG9ubHkgZ2VuZXJpYyB0cmFuc2FjdGlvbiBpbmZvcm1hdGlvbiB3aWxsIGJlIHJldHVybmVkLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0VHJhbnNhY3Rpb24gKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4sIHRyYW5zYWN0aW9uSWQsIHNvdXJjZSkge1xuICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9uLmdldFRyYW5zYWN0aW9uKGFjY2Vzc1Rva2VuLCB0cmFuc2FjdGlvbklkLCBzb3VyY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1c3RvbWVyJ3MgY3VycmVudCBkaXJlY3QtZGViaXQgbWFuZGF0ZXNcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uICBJZiBub3RcbiAgICogc3BlY2lmaWVkLCB0aGUgYWNjZXNzVG9rZW4gb24gdGhlIG9wdGlvbnMgb2JqZWN0IGlzIHVzZWQuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBsaXN0TWFuZGF0ZXMgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy5tYW5kYXRlLmxpc3RNYW5kYXRlcyhhY2Nlc3NUb2tlbik7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBzcGVjaWZpYyBkaXJlY3QgZGViaXQgbWFuZGF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWFuZGF0ZUlkIC0gdGhlIHVuaXF1ZSBtYW5kYXRlIElEXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBkZWxldGVNYW5kYXRlIChhY2Nlc3NUb2tlbiA9IHRoaXMuY29uZmlnLmFjY2Vzc1Rva2VuLCBtYW5kYXRlSWQpIHtcbiAgICByZXR1cm4gdGhpcy5tYW5kYXRlLmRlbGV0ZU1hbmRhdGUoYWNjZXNzVG9rZW4sIG1hbmRhdGVJZCk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdHMgdGhlIGN1c3RvbWVyJ3Mgc2NoZWR1bGVkIHBheW1lbnRzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBsaXN0U2NoZWR1bGVkUGF5bWVudHMgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy5wYXltZW50Lmxpc3RTY2hlZHVsZWRQYXltZW50cyhhY2Nlc3NUb2tlbik7XG4gIH1cblxuICAvKipcbiAgICogTWFrZXMgYSBwYXltZW50IG9uIGJlaGFsZiBvZiB0aGUgY3VzdG9tZXIgdG8gYW5vdGhlciBVSyBiYW5rIGFjY291bnQgdXNpbmcgdGhlIEZhc3RlciBQYXltZW50cyBuZXR3b3JrXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqICBAcGFyYW0ge3N0cmluZ30gZGVzdGluYXRpb25BY2NvdW50VWlkIC0gdGhlIGFjY291bnQgaWRlbnRpZmllciBvZiB0aGUgcmVjaXBpZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWZlcmVuY2UgLSBUaGUgcGF5bWVudCByZWZlcmVuY2UsIG1heC4gMTggY2hhcmFjdGVycy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGFtb3VudCAtIHRoZSBhbW91bnQgdG8gYmUgc2VuZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBjdXJyZW5jeSAtIHRoZSBjdXJyZW5jeSwgb3B0aW9uYWwsIGRlZmF1bHRzIHRvIFwiR0JQXCIuXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBtYWtlTG9jYWxQYXltZW50IChhY2Nlc3NUb2tlbiA9IHRoaXMuY29uZmlnLmFjY2Vzc1Rva2VuLCBkZXN0aW5hdGlvbkFjY291bnRVaWQsIHJlZmVyZW5jZSwgYW1vdW50LCBjdXJyZW5jeSA9ICdHQlAnKSB7XG4gICAgcmV0dXJuIHRoaXMucGF5bWVudC5tYWtlTG9jYWxQYXltZW50KGFjY2Vzc1Rva2VuLCBkZXN0aW5hdGlvbkFjY291bnRVaWQsIHJlZmVyZW5jZSwgYW1vdW50LCBjdXJyZW5jeSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VzdG9tZXIncyBjb250YWN0cyAocGF5ZWVzKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0Q29udGFjdHMgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWN0LmdldENvbnRhY3RzKGFjY2Vzc1Rva2VuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgc3BlY2lmaWMgY29udGFjdCAocGF5ZWUpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb250YWN0SWQgLSB0aGUgY29udGFjdCdzIElELlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgZ2V0Q29udGFjdEFjY291bnQgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4sIGNvbnRhY3RJZCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhY3QuZ2V0Q29udGFjdEFjY291bnQoYWNjZXNzVG9rZW4sIGNvbnRhY3RJZCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvbnRhY3QgKHBheWVlKSBmb3IgdGhlIGN1c3RvbWVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gdGhlIG5hbWUgb2YgdGhlIG5ldyBjb250YWN0LlxuICAgKiBAcGFyYW0ge3N0cmluZz19IGFjY291bnRUeXBlIC0gdGhlIGFjY291bnQgdHlwZSAoZG9tZXN0aWMgb3IgaW50ZXJuYXRpb25hbCksIG9wdGlvbmFsIGFuZCBkZWZhdWx0cyB0b1xuICAgKiAgIFVLX0FDQ09VTlRfQU5EX1NPUlRfQ09ERS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY291bnROdW1iZXIgLSB0aGUgY29udGFjdCdzIGJhbmsgYWNjb3VudCBudW1iZXIuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzb3J0Q29kZSAtIHRoZSBjb250YWN0J3Mgc29ydCBjb2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY3VzdG9tZXJJZCAtIHRoZSBjdXN0b21lcidzIElELlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZSBodHRwIHJlcXVlc3QgcHJvbWlzZVxuICAgKi9cbiAgY3JlYXRlQ29udGFjdCAoYWNjZXNzVG9rZW4gPSB0aGlzLmNvbmZpZy5hY2Nlc3NUb2tlbiwgbmFtZSwgYWNjb3VudFR5cGUgPSAnVUtfQUNDT1VOVF9BTkRfU09SVF9DT0RFJywgYWNjb3VudE51bWJlciwgc29ydENvZGUsIGN1c3RvbWVySWQpIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWN0LmNyZWF0ZUNvbnRhY3QoYWNjZXNzVG9rZW4sIG5hbWUsIGFjY291bnRUeXBlLCBhY2NvdW50TnVtYmVyLCBzb3J0Q29kZSwgY3VzdG9tZXJJZCk7XG4gIH1cblxuICBkZWxldGVDb250YWN0IChhY2Nlc3NUb2tlbiwgY29udGFjdElkKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFjdC5kZWxldGVDb250YWN0KGFjY2Vzc1Rva2VuLCBjb250YWN0SWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYSBsaXN0IG9mIHRoZSBjdXN0b21lcidzIHNhdmluZ3MgZ29hbHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGxpc3RTYXZpbmdzR29hbHMgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy5zYXZpbmdzR29hbHMubGlzdFNhdmluZ3NHb2FscyhhY2Nlc3NUb2tlbik7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhIHNwZWNpZmljIHNhdmluZ3MgZ29hbFxuICAgKiBAcGFyYW0ge3N0cmluZ30gYWNjZXNzVG9rZW4gLSB0aGUgb2F1dGggYmVhcmVyIHRva2VuLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2F2aW5nc0dvYWxJZCAtIHRoZSBzYXZpbmdzIGdvYWwncyBJRC5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGdldFNhdmluZ3NHb2FsIChhY2Nlc3NUb2tlbiA9IHRoaXMuY29uZmlnLmFjY2Vzc1Rva2VuLCBzYXZpbmdzR29hbElkKSB7XG4gICAgcmV0dXJuIHRoaXMuc2F2aW5nc0dvYWxzLmdldFNhdmluZ3NHb2FsKGFjY2Vzc1Rva2VuLCBzYXZpbmdzR29hbElkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY29udGFjdCAocGF5ZWUpIGZvciB0aGUgY3VzdG9tZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHNhdmluZ3NHb2FsSWQgLSB0aGUgc2F2aW5ncyBnb2FsJ3MgSUQsIGdlbmVyYXRlIG9uZSBpZiBjcmVhdGluZyBhIGdvYWwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gdGhlIG5hbWUgb2YgdGhlIG5ldyBjb250YWN0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY3VycmVuY3kgLSB0aGUgY3VycmVuY3kgb2YgdGhlIHNhdmluZ3MgZ29hbC4gRGVmYXVsdHMgdG8gJ0dCUCcuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRBbW91bnQgLSB0aGUgdGFyZ2V0IGFtb3VudCBpbiBtaW5vciB1bml0cyAoZS5nLiAxMjM0ID0+IMKjMTIuMzQpLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0Q3VycmVuY3kgLSB0aGUgdGFyZ2V0IGN1cnJlbmN5LCBhbHNvIGRlZmF1bHRzIHRvICdHQlAnLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYmFzZTY0RW5jb2RlZFBob3RvIC0gYmFzZTY0IGVuY29kZWQgaW1hZ2UgdG8gYXNzb2NpYXRlIHdpdGggdGhlIGdvYWwuIChvcHRpb25hbClcbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGNyZWF0ZVNhdmluZ3NHb2FsIChhY2Nlc3NUb2tlbiA9IHRoaXMuY29uZmlnLmFjY2Vzc1Rva2VuLCBzYXZpbmdzR29hbElkLCBuYW1lLCBjdXJyZW5jeSA9ICdHQlAnLCAgdGFyZ2V0QW1vdW50LCB0YXJnZXRDdXJyZW5jeSA9ICdHQlAnLCBiYXNlNjRFbmNvZGVkUGhvdG8pIHtcbiAgICByZXR1cm4gdGhpcy5zYXZpbmdzR29hbHMuY3JlYXRlU2F2aW5nc0dvYWwoYWNjZXNzVG9rZW4sIHNhdmluZ3NHb2FsSWQsIG5hbWUsIGN1cnJlbmN5LCAgdGFyZ2V0QW1vdW50LCB0YXJnZXRDdXJyZW5jeSwgYmFzZTY0RW5jb2RlZFBob3RvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIHNwZWNpZmljIGRpcmVjdCBkZWJpdCBtYW5kYXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhY2Nlc3NUb2tlbiAtIHRoZSBvYXV0aCBiZWFyZXIgdG9rZW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzYXZpbmdzR29hbElkIC0gdGhlIHVuaXF1ZSBtYW5kYXRlIElEXG4gICAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlIGh0dHAgcmVxdWVzdCBwcm9taXNlXG4gICAqL1xuICBkZWxldGVTYXZpbmdzR29hbCAoYWNjZXNzVG9rZW4sIHNhdmluZ3NHb2FsSWQpIHtcbiAgICByZXR1cm4gdGhpcy5zYXZpbmdzR29hbHMuZGVsZXRlU2F2aW5nc0dvYWwoYWNjZXNzVG9rZW4sIHNhdmluZ3NHb2FsSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1c3RvbWVyJ3MgY2FyZFxuICAgKiBAcGFyYW0ge3N0cmluZz19IGFjY2Vzc1Rva2VuIC0gdGhlIG9hdXRoIGJlYXJlciB0b2tlbi4gIElmIG5vdFxuICAgKiBzcGVjaWZpZWQsIHRoZSBhY2Nlc3NUb2tlbiBvbiB0aGUgb3B0aW9ucyBvYmplY3QgaXMgdXNlZC5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGdldENhcmQgKGFjY2Vzc1Rva2VuID0gdGhpcy5jb25maWcuYWNjZXNzVG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy5jYXJkLmdldENhcmQoYWNjZXNzVG9rZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4Y2hhbmdlcyB0aGUgYXV0aG9yaXphdGlvbiBjb2RlIGZvciBhbiBhY2Nlc3MgdG9rZW5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGF1dGhvcml6YXRpb25Db2RlIC0gdGhlIGF1dGhvcml6YXRpb24gY29kZSwgYWNxdWlyZWQgZnJvbSB0aGUgdXNlciBhZ2VudCBhZnRlciB0aGVcbiAgICogdXNlciBhdXRoZW50aWNhdGVzIHdpdGggc3RhcmxpbmdcbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIGdldEFjY2Vzc1Rva2VuIChhdXRob3JpemF0aW9uQ29kZSkge1xuICAgIHJldHVybiB0aGlzLm9BdXRoLmdldEFjY2Vzc1Rva2VuKGF1dGhvcml6YXRpb25Db2RlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGNoYW5nZXMgdGhlIGF1dGhvcml6YXRpb24gY29kZSBmb3IgYW4gYWNjZXNzIHRva2VuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWZyZXNoVG9rZW4gLSB0aGUgb2F1dGggcmVmcmVzaCB0b2tlbiwgdXNlZCB0byBjbGFpbSBhIG5ldyBhY2Nlc3MgdG9rZW4gd2hlbiB0aGUgYWNjZXNzIHRva2VuXG4gICAqIGV4cGlyZXMuIEEgbmV3IHJlZnJlc2ggdG9rZW4gaXMgYWxzbyByZXR1cm5lZC5cbiAgICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGUgaHR0cCByZXF1ZXN0IHByb21pc2VcbiAgICovXG4gIHJlZnJlc2hBY2Nlc3NUb2tlbiAocmVmcmVzaFRva2VuKSB7XG4gICAgcmV0dXJuIHRoaXMub0F1dGgucmVmcmVzaEFjY2Vzc1Rva2VuKHJlZnJlc2hUb2tlbik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTdGFybGluZztcbiIsImV4cG9ydCBjb25zdCBkZWZhdWx0SGVhZGVycyA9IChhY2Nlc3NUb2tlbikgPT4ge1xuICByZXR1cm4ge1xuICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgcG9zdEhlYWRlcnMgPSAoYWNjZXNzVG9rZW4pID0+IHtcbiAgcmV0dXJuIHtcbiAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gXG4gIH07XG59OyIsIlxuY29uc3QgcnVuUnVsZXMgPSAocG9zLCBuYW1lLCBydWxlcywgdmFsdWUpID0+IHtcbiAgY29uc3QgdmFsdWVUeXBlID0gdHlwZW9mIHZhbHVlO1xuXG4gIGlmIChydWxlc1swXSA9PSAnb3B0aW9uYWwnKSB7XG4gICAgaWYgKHZhbHVlICYmICh2YWx1ZVR5cGUgIT09IHJ1bGVzWzFdKSkge1xuICAgICAgcmV0dXJuIGAke25hbWV9IHBhcmFtZXRlciBpbiBwb3NpdGlvbiAke3Bvc30gaXMgYW4gb3B0aW9uYWwgJHtydWxlc1sxXX0gYnV0IHdhcyAke3ZhbHVlVHlwZX1gXG4gICAgfVxuICB9XG4gIGlmIChydWxlc1swXSA9PSAncmVxdWlyZWQnKSB7XG4gICAgaWYgKHZhbHVlICYmICh2YWx1ZVR5cGUgIT09IHJ1bGVzWzFdKSkge1xuICAgICAgcmV0dXJuIGAke25hbWV9IHBhcmFtZXRlciBpbiBwb3NpdGlvbiAke3Bvc30gaXMgYSByZXF1aXJlZCAke3J1bGVzWzFdfSBidXQgd2FzICR7dmFsdWVUeXBlfWBcbiAgICB9IGVsc2UgaWYgKCF2YWx1ZSkge1xuICAgICAgcmV0dXJuIGAke25hbWV9IHBhcmFtZXRlciBpbiBwb3NpdGlvbiAke3Bvc30gaXMgYSByZXF1aXJlZCAke3J1bGVzWzFdfSBidXQgd2FzICR7dmFsdWV9YFxuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0ICB0eXBlVmFsaWRhdGlvbiA9IChhcmdzLCBkZWYpID0+IHtcbiAgbGV0IHByb2JsZW1zID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZGVmLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcG9zID0gaTtcbiAgICBjb25zdCBuYW1lID0gZGVmW2ldLm5hbWU7XG4gICAgY29uc3QgcnVsZXMgPSBkZWZbaV0udmFsaWRhdGlvbnM7XG4gICAgY29uc3QgdmFsdWUgPSBpIDw9IGFyZ3MubGVuZ3RoID8gYXJnc1tpXSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBwcm9ibGVtID0gcnVuUnVsZXMocG9zLCBuYW1lLCBydWxlcywgdmFsdWUpO1xuICAgIGlmIChwcm9ibGVtKSBwcm9ibGVtcy5wdXNoKHByb2JsZW0pO1xuICB9XG5cbiAgaWYgKHByb2JsZW1zLmxlbmd0aCkge1xuICAgIHRocm93IHByb2JsZW1zO1xuICB9XG5cbn07XG5cbiJdfQ=="}